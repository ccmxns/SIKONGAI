# 司空AI

一个基于 Electron 的桌面 AI 聊天应用。

## 功能特性

- 🎨 **自适应主题**：自动跟随系统深浅色模式
- 🪟 **自定义标题栏**：无边框设计，自定义窗口控制
- 💾 **窗口状态记忆**：自动保存和恢复窗口大小、位置
- 💬 **智能聊天界面**：现代化的聊天 UI 设计
- 📱 **响应式设计**：适配不同屏幕尺寸
- 🔄 **对话历史**：本地保存聊天记录
- ⚡ **实时保存**：设置参数自动保存，无需手动操作

## 项目结构

```
sikongai/
├── src/
│   ├── main.js          # 主进程文件
│   ├── preload.js       # 预加载脚本
│   ├── views/
│   │   └── index.html   # 主界面
│   ├── styles/
│   │   ├── main.css     # 主要样式
│   │   ├── titlebar.css # 标题栏样式
│   │   └── chat.css     # 聊天界面样式
│   └── scripts/
│       ├── main.js      # 主应用脚本
│       ├── titlebar.js  # 标题栏控制
│       └── chat.js      # 聊天功能
├── icon.png             # 应用图标
├── package.json         # 项目配置
└── README.md           # 项目说明
```

## 安装依赖

```bash
npm install
```

## 运行应用

开发模式：
```bash
npm run dev
```

生产模式：
```bash
npm start
```

## 构建应用

构建到 dist 目录：
```bash
npm run build
```

仅打包（不制作安装程序）：
```bash
npm run pack
```

## 技术栈

- **Electron** - 跨平台桌面应用框架
- **HTML5/CSS3** - 现代 Web 技术
- **JavaScript (ES6+)** - 应用逻辑
- **electron-window-state** - 窗口状态管理

## 开发说明

### 初始化功能

1. **窗口状态管理**：使用 `electron-window-state` 自动保存和恢复窗口位置、大小
2. **主题适配**：监听系统主题变化，自动切换深浅色模式
3. **自定义标题栏**：移除默认菜单栏，实现自定义窗口控制按钮
4. **模块化结构**：CSS、HTML、JavaScript 文件按功能分类存放
5. **实时保存**：设置页面的所有参数都支持实时保存，修改后500ms自动保存到本地

### 聊天功能

- 支持创建多个对话
- 本地存储聊天历史
- 实时输入状态显示
- 真实的 AI API 请求（支持多种模型）
- 并发请求处理，自动保存到桌面"并发目录"
- 响应文件按时间戳分类，使用中文友好命名
- 支持基本的 Markdown 格式
- 详细的错误处理和重试机制

## 许可证

MIT License